$navbar-avatar-size: 30px;

.page-aside-fixed {
  .page-aside {
    margin-top: pxToRem($site-menubar-height); 
  }
}

body.site-navbar-small {
  padding-top: (remToPx($navbar-small-height) + $site-menubar-height);
}

.site-navbar-small {
  .site-navbar {
    height: $navbar-small-height;
    min-height: $navbar-small-height;

    .navbar-brand {
      height: $navbar-small-height;
      padding: remToPx($navbar-small-padding-vertical) $navbar-brand-padding-horizontal;
    }

    .navbar-nav {
      margin: ($navbar-small-padding-vertical / 2) (-$navbar-padding-x);

      @include media-breakpoint-up(md) {
        > li {
          > a {
            padding-top:    $navbar-small-padding-vertical;
            padding-bottom: $navbar-small-padding-vertical;
          }
        }
      }
    }

    .navbar-toggle, .navbar-toggler {
      height: $navbar-small-height;
      padding: $navbar-small-padding-vertical $navbar-padding-x;
    }

    .navbar-toolbar {
      > li {
        > a {
          padding-top: $navbar-small-padding-vertical;
          padding-bottom: $navbar-small-padding-vertical;
        }
      }
    }

    .navbar-nav, .navbar-toolbar {
      > li > a.navbar-avatar {
        padding-top: ((remToPx($navbar-small-height) - $navbar-avatar-size)/2);
        padding-bottom: ((remToPx($navbar-small-height) - $navbar-avatar-size)/2);
      }
    }

    .navbar-search-overlap {
      .form-control {
        height: $navbar-small-height !important;
      }
    }
  }

  .site-menubar {
    top: $navbar-small-height;
  }

  .site-skintools {
    top: (remToPx($navbar-small-height) + $site-menubar-height + 30px);
  }

  .slidePanel {
    &.slidePanel-right, &.slidePanel-left {
      top: (remToPx($navbar-small-height) + $site-menubar-height);
    }
  }
}

@include media-breakpoint-down(sm) {
  body.site-navbar-small {
    padding-top: $navbar-small-height;

    .site-menubar {
      top: $navbar-small-height;
      height: calc(100% - #{$navbar-small-height});
    }

    .page-aside {
      top: $navbar-small-height;
    }

    .site-skintools {
      top: (remToPx($navbar-small-height) + 30px);
    }

    .slidePanel {
      &.slidePanel-right, &.slidePanel-left {
        top: $navbar-small-height;
      }
    }

    &.site-navbar-collapse-show {
      padding-top: (2 * $navbar-small-height);

      .site-menubar {
        top: (2*$navbar-small-height);
        height: calc(100% - #{2*$navbar-small-height});
      }

      .page-aside {
        top: (2 * $navbar-small-height);
      }

      .site-skintools {
        top: (2 * remToPx($navbar-small-height) + 30px) ;
      }

      .slidePanel {
        &.slidePanel-left, &.slidePanel-right {
          top: (2 * $navbar-small-height);
        }
      }
    }
  }
}
